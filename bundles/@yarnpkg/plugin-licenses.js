/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-licenses",
factory: function (require) {
var plugin=(()=>{var ee=Object.create,H=Object.defineProperty,se=Object.defineProperties,ie=Object.getOwnPropertyDescriptor,ne=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertyNames,vt=Object.getOwnPropertySymbols,oe=Object.getPrototypeOf,kt=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var Pt=(s,t,e)=>t in s?H(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,A=(s,t)=>{for(var e in t||(t={}))kt.call(t,e)&&Pt(s,e,t[e]);if(vt)for(var e of vt(t))ae.call(t,e)&&Pt(s,e,t[e]);return s},I=(s,t)=>se(s,ne(t)),le=s=>H(s,"__esModule",{value:!0});var S=s=>{if(typeof require!="undefined")return require(s);throw new Error('Dynamic require of "'+s+'" is not supported')};var R=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports),ht=(s,t)=>{for(var e in t)H(s,e,{get:t[e],enumerable:!0})},ce=(s,t,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of re(t))!kt.call(s,i)&&i!=="default"&&H(s,i,{get:()=>t[i],enumerable:!(e=ie(t,i))||e.enumerable});return s},v=s=>ce(le(H(s!=null?ee(oe(s)):{},"default",s&&s.__esModule&&"default"in s?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0})),s);var Lt=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var E=(s,t,e)=>(Lt(s,t,"read from private field"),e?e.call(s):t.get(s)),Q=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)};var x=(s,t,e)=>(Lt(s,t,"access private method"),e);var Et=R((je,It)=>{var B=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,he=typeof AbortController=="function",tt=he?AbortController:class{constructor(){this.signal=new At}abort(){this.signal.dispatchEvent("abort")}},pe=typeof AbortSignal=="function",de=typeof tt.AbortSignal=="function",At=pe?AbortSignal:de?tt.AbortController:class{constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(t){if(t==="abort"){this.aborted=!0;let e={type:t,target:this};this.onabort(e),this._listeners.forEach(i=>i(e),this)}}onabort(){}addEventListener(t,e){t==="abort"&&this._listeners.push(e)}removeEventListener(t,e){t==="abort"&&(this._listeners=this._listeners.filter(i=>i!==e))}},pt=new Set,dt=(s,t)=>{let e=`LRU_CACHE_OPTION_${s}`;et(e)&&ut(e,`${s} option`,`options.${t}`,M)},ft=(s,t)=>{let e=`LRU_CACHE_METHOD_${s}`;if(et(e)){let{prototype:i}=M,{get:n}=Object.getOwnPropertyDescriptor(i,s);ut(e,`${s} method`,`cache.${t}()`,n)}},fe=(s,t)=>{let e=`LRU_CACHE_PROPERTY_${s}`;if(et(e)){let{prototype:i}=M,{get:n}=Object.getOwnPropertyDescriptor(i,s);ut(e,`${s} property`,`cache.${t}`,n)}},Tt=(...s)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...s):console.error(...s)},et=s=>!pt.has(s),ut=(s,t,e,i)=>{pt.add(s);let n=`The ${t} is deprecated. Please use ${e} instead.`;Tt(n,"DeprecationWarning",s,i)},C=s=>s&&s===Math.floor(s)&&s>0&&isFinite(s),zt=s=>C(s)?s<=Math.pow(2,8)?Uint8Array:s<=Math.pow(2,16)?Uint16Array:s<=Math.pow(2,32)?Uint32Array:s<=Number.MAX_SAFE_INTEGER?q:null:null,q=class extends Array{constructor(t){super(t);this.fill(0)}},Ot=class{constructor(t){if(t===0)return[];let e=zt(t);this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},M=class{constructor(t={}){let{max:e=0,ttl:i,ttlResolution:n=1,ttlAutopurge:r,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:d,noDisposeOnSet:h,noUpdateTTL:f,maxSize:u=0,maxEntrySize:y=0,sizeCalculation:$,fetchMethod:P,fetchContext:m,noDeleteOnFetchRejection:T,noDeleteOnStaleGet:L}=t,{length:K,maxAge:X,stale:Z}=t instanceof M?{}:t;if(e!==0&&!C(e))throw new TypeError("max option must be a nonnegative integer");let lt=e?zt(e):Array;if(!lt)throw new Error("invalid max value: "+e);if(this.max=e,this.maxSize=u,this.maxEntrySize=y||this.maxSize,this.sizeCalculation=$||K,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=P||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=m,!this.fetchMethod&&m!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(e).fill(null),this.valList=new Array(e).fill(null),this.next=new lt(e),this.prev=new lt(e),this.head=0,this.tail=0,this.free=new Ot(e),this.initialFill=1,this.size=0,typeof l=="function"&&(this.dispose=l),typeof d=="function"?(this.disposeAfter=d,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!h,this.noUpdateTTL=!!f,this.noDeleteOnFetchRejection=!!T,this.maxEntrySize!==0){if(this.maxSize!==0&&!C(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!C(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!c||!!Z,this.noDeleteOnStaleGet=!!L,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=C(n)||n===0?n:1,this.ttlAutopurge=!!r,this.ttl=i||X||0,this.ttl){if(!C(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let ct="LRU_CACHE_UNBOUNDED";et(ct)&&(pt.add(ct),Tt("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ct,M))}Z&&dt("stale","allowStale"),X&&dt("maxAge","ttl"),K&&dt("length","sizeCalculation")}getRemainingTTL(t){return this.has(t,{updateAgeOnHas:!1})?Infinity:0}initializeTTLTracking(){this.ttls=new q(this.max),this.starts=new q(this.max),this.setItemTTL=(i,n,r=B.now())=>{if(this.starts[i]=n!==0?r:0,this.ttls[i]=n,n!==0&&this.ttlAutopurge){let o=setTimeout(()=>{this.isStale(i)&&this.delete(this.keyList[i])},n+1);o.unref&&o.unref()}},this.updateItemAge=i=>{this.starts[i]=this.ttls[i]!==0?B.now():0};let t=0,e=()=>{let i=B.now();if(this.ttlResolution>0){t=i;let n=setTimeout(()=>t=0,this.ttlResolution);n.unref&&n.unref()}return i};this.getRemainingTTL=i=>{let n=this.keyMap.get(i);return n===void 0?0:this.ttls[n]===0||this.starts[n]===0?Infinity:this.starts[n]+this.ttls[n]-(t||e())},this.isStale=i=>this.ttls[i]!==0&&this.starts[i]!==0&&(t||e())-this.starts[i]>this.ttls[i]}updateItemAge(t){}setItemTTL(t,e,i){}isStale(t){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new q(this.max),this.removeItemSize=t=>{this.calculatedSize-=this.sizes[t],this.sizes[t]=0},this.requireSize=(t,e,i,n)=>{if(this.isBackgroundFetch(e))return 0;if(!C(i))if(n){if(typeof n!="function")throw new TypeError("sizeCalculation must be a function");if(i=n(e,t),!C(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return i},this.addItemSize=(t,e)=>{if(this.sizes[t]=e,this.maxSize){let i=this.maxSize-this.sizes[t];for(;this.calculatedSize>i;)this.evict(!0)}this.calculatedSize+=this.sizes[t]}}removeItemSize(t){}addItemSize(t,e){}requireSize(t,e,i,n){if(i||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:t=this.allowStale}={}){if(this.size)for(let e=this.tail;!(!this.isValidIndex(e)||((t||!this.isStale(e))&&(yield e),e===this.head));)e=this.prev[e]}*rindexes({allowStale:t=this.allowStale}={}){if(this.size)for(let e=this.head;!(!this.isValidIndex(e)||((t||!this.isStale(e))&&(yield e),e===this.tail));)e=this.next[e]}isValidIndex(t){return this.keyMap.get(this.keyList[t])===t}*entries(){for(let t of this.indexes())yield[this.keyList[t],this.valList[t]]}*rentries(){for(let t of this.rindexes())yield[this.keyList[t],this.valList[t]]}*keys(){for(let t of this.indexes())yield this.keyList[t]}*rkeys(){for(let t of this.rindexes())yield this.keyList[t]}*values(){for(let t of this.indexes())yield this.valList[t]}*rvalues(){for(let t of this.rindexes())yield this.valList[t]}[Symbol.iterator](){return this.entries()}find(t,e={}){for(let i of this.indexes())if(t(this.valList[i],this.keyList[i],this))return this.get(this.keyList[i],e)}forEach(t,e=this){for(let i of this.indexes())t.call(e,this.valList[i],this.keyList[i],this)}rforEach(t,e=this){for(let i of this.rindexes())t.call(e,this.valList[i],this.keyList[i],this)}get prune(){return ft("prune","purgeStale"),this.purgeStale}purgeStale(){let t=!1;for(let e of this.rindexes({allowStale:!0}))this.isStale(e)&&(this.delete(this.keyList[e]),t=!0);return t}dump(){let t=[];for(let e of this.indexes({allowStale:!0})){let i=this.keyList[e],n=this.valList[e],o={value:this.isBackgroundFetch(n)?n.__staleWhileFetching:n};if(this.ttls){o.ttl=this.ttls[e];let a=B.now()-this.starts[e];o.start=Math.floor(Date.now()-a)}this.sizes&&(o.size=this.sizes[e]),t.unshift([i,o])}return t}load(t){this.clear();for(let[e,i]of t){if(i.start){let n=Date.now()-i.start;i.start=B.now()-n}this.set(e,i.value,i)}}dispose(t,e,i){}set(t,e,{ttl:i=this.ttl,start:n,noDisposeOnSet:r=this.noDisposeOnSet,size:o=0,sizeCalculation:a=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL}={}){if(o=this.requireSize(t,e,o,a),this.maxEntrySize&&o>this.maxEntrySize)return this.delete(t),this;let l=this.size===0?void 0:this.keyMap.get(t);if(l===void 0)l=this.newIndex(),this.keyList[l]=t,this.valList[l]=e,this.keyMap.set(t,l),this.next[this.tail]=l,this.prev[l]=this.tail,this.tail=l,this.size++,this.addItemSize(l,o),c=!1;else{let d=this.valList[l];e!==d&&(this.isBackgroundFetch(d)?d.__abortController.abort():r||(this.dispose(d,t,"set"),this.disposeAfter&&this.disposed.push([d,t,"set"])),this.removeItemSize(l),this.valList[l]=e,this.addItemSize(l,o)),this.moveToTail(l)}if(i!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),c||this.setItemTTL(l,i,n),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let t=this.valList[this.head];return this.evict(!0),t}}evict(t){let e=this.head,i=this.keyList[e],n=this.valList[e];return this.isBackgroundFetch(n)?n.__abortController.abort():(this.dispose(n,i,"evict"),this.disposeAfter&&this.disposed.push([n,i,"evict"])),this.removeItemSize(e),t&&(this.keyList[e]=null,this.valList[e]=null,this.free.push(e)),this.head=this.next[e],this.keyMap.delete(i),this.size--,e}has(t,{updateAgeOnHas:e=this.updateAgeOnHas}={}){let i=this.keyMap.get(t);return i!==void 0&&!this.isStale(i)?(e&&this.updateItemAge(i),!0):!1}peek(t,{allowStale:e=this.allowStale}={}){let i=this.keyMap.get(t);if(i!==void 0&&(e||!this.isStale(i))){let n=this.valList[i];return this.isBackgroundFetch(n)?n.__staleWhileFetching:n}}backgroundFetch(t,e,i,n){let r=e===void 0?void 0:this.valList[e];if(this.isBackgroundFetch(r))return r;let o=new tt,a={signal:o.signal,options:i,context:n},c=f=>(o.signal.aborted||this.set(t,f,a.options),f),l=f=>{if(this.valList[e]===h&&(!i.noDeleteOnFetchRejection||h.__staleWhileFetching===void 0?this.delete(t):this.valList[e]=h.__staleWhileFetching),h.__returned===h)throw f},d=f=>f(this.fetchMethod(t,r,a)),h=new Promise(d).then(c,l);return h.__abortController=o,h.__staleWhileFetching=r,h.__returned=null,e===void 0?(this.set(t,h,a.options),e=this.keyMap.get(t)):this.valList[e]=h,h}isBackgroundFetch(t){return t&&typeof t=="object"&&typeof t.then=="function"&&Object.prototype.hasOwnProperty.call(t,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(t,"__returned")&&(t.__returned===t||t.__returned===null)}async fetch(t,{allowStale:e=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,ttl:r=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,fetchContext:h=this.fetchContext,forceRefresh:f=!1}={}){if(!this.fetchMethod)return this.get(t,{allowStale:e,updateAgeOnGet:i,noDeleteOnStaleGet:n});let u={allowStale:e,updateAgeOnGet:i,noDeleteOnStaleGet:n,ttl:r,noDisposeOnSet:o,size:a,sizeCalculation:c,noUpdateTTL:l,noDeleteOnFetchRejection:d},y=this.keyMap.get(t);if(y===void 0){let $=this.backgroundFetch(t,y,u,h);return $.__returned=$}else{let $=this.valList[y];if(this.isBackgroundFetch($))return e&&$.__staleWhileFetching!==void 0?$.__staleWhileFetching:$.__returned=$;if(!f&&!this.isStale(y))return this.moveToTail(y),i&&this.updateItemAge(y),$;let P=this.backgroundFetch(t,y,u,h);return e&&P.__staleWhileFetching!==void 0?P.__staleWhileFetching:P.__returned=P}}get(t,{allowStale:e=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet}={}){let r=this.keyMap.get(t);if(r!==void 0){let o=this.valList[r],a=this.isBackgroundFetch(o);return this.isStale(r)?a?e?o.__staleWhileFetching:void 0:(n||this.delete(t),e?o:void 0):a?void 0:(this.moveToTail(r),i&&this.updateItemAge(r),o)}}connect(t,e){this.prev[e]=t,this.next[t]=e}moveToTail(t){t!==this.tail&&(t===this.head?this.head=this.next[t]:this.connect(this.prev[t],this.next[t]),this.connect(this.tail,t),this.tail=t)}get del(){return ft("del","delete"),this.delete}delete(t){let e=!1;if(this.size!==0){let i=this.keyMap.get(t);if(i!==void 0)if(e=!0,this.size===1)this.clear();else{this.removeItemSize(i);let n=this.valList[i];this.isBackgroundFetch(n)?n.__abortController.abort():(this.dispose(n,t,"delete"),this.disposeAfter&&this.disposed.push([n,t,"delete"])),this.keyMap.delete(t),this.keyList[i]=null,this.valList[i]=null,i===this.tail?this.tail=this.prev[i]:i===this.head?this.head=this.next[i]:(this.next[this.prev[i]]=this.next[i],this.prev[this.next[i]]=this.prev[i]),this.size--,this.free.push(i)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return e}clear(){for(let t of this.rindexes({allowStale:!0})){let e=this.valList[t];if(this.isBackgroundFetch(e))e.__abortController.abort();else{let i=this.keyList[t];this.dispose(e,i,"delete"),this.disposeAfter&&this.disposed.push([e,i,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return ft("reset","clear"),this.clear}get length(){return fe("length","size"),this.size}static get AbortController(){return tt}static get AbortSignal(){return At}};It.exports=M});var Ut=R((Ne,Mt)=>{"use strict";var p=(...s)=>s.every(t=>t)?s.join(""):"",w=s=>s?encodeURIComponent(s):"",Ct=s=>s.toLowerCase().replace(/^\W+|\/|\W+$/g,"").replace(/\W+/g,"-"),ue={sshtemplate:({domain:s,user:t,project:e,committish:i})=>`git@${s}:${t}/${e}.git${p("#",i)}`,sshurltemplate:({domain:s,user:t,project:e,committish:i})=>`git+ssh://git@${s}/${t}/${e}.git${p("#",i)}`,edittemplate:({domain:s,user:t,project:e,committish:i,editpath:n,path:r})=>`https://${s}/${t}/${e}${p("/",n,"/",w(i||"HEAD"),"/",r)}`,browsetemplate:({domain:s,user:t,project:e,committish:i,treepath:n})=>`https://${s}/${t}/${e}${p("/",n,"/",w(i))}`,browsetreetemplate:({domain:s,user:t,project:e,committish:i,treepath:n,path:r,fragment:o,hashformat:a})=>`https://${s}/${t}/${e}/${n}/${w(i||"HEAD")}/${r}${p("#",a(o||""))}`,browseblobtemplate:({domain:s,user:t,project:e,committish:i,blobpath:n,path:r,fragment:o,hashformat:a})=>`https://${s}/${t}/${e}/${n}/${w(i||"HEAD")}/${r}${p("#",a(o||""))}`,docstemplate:({domain:s,user:t,project:e,treepath:i,committish:n})=>`https://${s}/${t}/${e}${p("/",i,"/",w(n))}#readme`,httpstemplate:({auth:s,domain:t,user:e,project:i,committish:n})=>`git+https://${p(s,"@")}${t}/${e}/${i}.git${p("#",n)}`,filetemplate:({domain:s,user:t,project:e,committish:i,path:n})=>`https://${s}/${t}/${e}/raw/${w(i||"HEAD")}/${n}`,shortcuttemplate:({type:s,user:t,project:e,committish:i})=>`${s}:${t}/${e}${p("#",i)}`,pathtemplate:({user:s,project:t,committish:e})=>`${s}/${t}${p("#",e)}`,bugstemplate:({domain:s,user:t,project:e})=>`https://${s}/${t}/${e}/issues`,hashformat:Ct},U={};U.github={protocols:["git:","http:","git+ssh:","git+https:","ssh:","https:"],domain:"github.com",treepath:"tree",blobpath:"blob",editpath:"edit",filetemplate:({auth:s,user:t,project:e,committish:i,path:n})=>`https://${p(s,"@")}raw.githubusercontent.com/${t}/${e}/${w(i||"HEAD")}/${n}`,gittemplate:({auth:s,domain:t,user:e,project:i,committish:n})=>`git://${p(s,"@")}${t}/${e}/${i}.git${p("#",n)}`,tarballtemplate:({domain:s,user:t,project:e,committish:i})=>`https://codeload.${s}/${t}/${e}/tar.gz/${w(i||"HEAD")}`,extract:s=>{let[,t,e,i,n]=s.pathname.split("/",5);if(!(i&&i!=="tree")&&(i||(n=s.hash.slice(1)),e&&e.endsWith(".git")&&(e=e.slice(0,-4)),!(!t||!e)))return{user:t,project:e,committish:n}}};U.bitbucket={protocols:["git+ssh:","git+https:","ssh:","https:"],domain:"bitbucket.org",treepath:"src",blobpath:"src",editpath:"?mode=edit",edittemplate:({domain:s,user:t,project:e,committish:i,treepath:n,path:r,editpath:o})=>`https://${s}/${t}/${e}${p("/",n,"/",w(i||"HEAD"),"/",r,o)}`,tarballtemplate:({domain:s,user:t,project:e,committish:i})=>`https://${s}/${t}/${e}/get/${w(i||"HEAD")}.tar.gz`,extract:s=>{let[,t,e,i]=s.pathname.split("/",4);if(!["get"].includes(i)&&(e&&e.endsWith(".git")&&(e=e.slice(0,-4)),!(!t||!e)))return{user:t,project:e,committish:s.hash.slice(1)}}};U.gitlab={protocols:["git+ssh:","git+https:","ssh:","https:"],domain:"gitlab.com",treepath:"tree",blobpath:"tree",editpath:"-/edit",httpstemplate:({auth:s,domain:t,user:e,project:i,committish:n})=>`git+https://${p(s,"@")}${t}/${e}/${i}.git${p("#",n)}`,tarballtemplate:({domain:s,user:t,project:e,committish:i})=>`https://${s}/${t}/${e}/repository/archive.tar.gz?ref=${w(i||"HEAD")}`,extract:s=>{let t=s.pathname.slice(1);if(t.includes("/-/")||t.includes("/archive.tar.gz"))return;let e=t.split("/"),i=e.pop();i.endsWith(".git")&&(i=i.slice(0,-4));let n=e.join("/");if(!(!n||!i))return{user:n,project:i,committish:s.hash.slice(1)}}};U.gist={protocols:["git:","git+ssh:","git+https:","ssh:","https:"],domain:"gist.github.com",editpath:"edit",sshtemplate:({domain:s,project:t,committish:e})=>`git@${s}:${t}.git${p("#",e)}`,sshurltemplate:({domain:s,project:t,committish:e})=>`git+ssh://git@${s}/${t}.git${p("#",e)}`,edittemplate:({domain:s,user:t,project:e,committish:i,editpath:n})=>`https://${s}/${t}/${e}${p("/",w(i))}/${n}`,browsetemplate:({domain:s,project:t,committish:e})=>`https://${s}/${t}${p("/",w(e))}`,browsetreetemplate:({domain:s,project:t,committish:e,path:i,hashformat:n})=>`https://${s}/${t}${p("/",w(e))}${p("#",n(i))}`,browseblobtemplate:({domain:s,project:t,committish:e,path:i,hashformat:n})=>`https://${s}/${t}${p("/",w(e))}${p("#",n(i))}`,docstemplate:({domain:s,project:t,committish:e})=>`https://${s}/${t}${p("/",w(e))}`,httpstemplate:({domain:s,project:t,committish:e})=>`git+https://${s}/${t}.git${p("#",e)}`,filetemplate:({user:s,project:t,committish:e,path:i})=>`https://gist.githubusercontent.com/${s}/${t}/raw${p("/",w(e))}/${i}`,shortcuttemplate:({type:s,project:t,committish:e})=>`${s}:${t}${p("#",e)}`,pathtemplate:({project:s,committish:t})=>`${s}${p("#",t)}`,bugstemplate:({domain:s,project:t})=>`https://${s}/${t}`,gittemplate:({domain:s,project:t,committish:e})=>`git://${s}/${t}.git${p("#",e)}`,tarballtemplate:({project:s,committish:t})=>`https://codeload.github.com/gist/${s}/tar.gz/${w(t||"HEAD")}`,extract:s=>{let[,t,e,i]=s.pathname.split("/",4);if(i!=="raw"){if(!e){if(!t)return;e=t,t=null}return e.endsWith(".git")&&(e=e.slice(0,-4)),{user:t,project:e,committish:s.hash.slice(1)}}},hashformat:function(s){return s&&"file-"+Ct(s)}};U.sourcehut={protocols:["git+ssh:","https:"],domain:"git.sr.ht",treepath:"tree",blobpath:"tree",filetemplate:({domain:s,user:t,project:e,committish:i,path:n})=>`https://${s}/${t}/${e}/blob/${w(i)||"HEAD"}/${n}`,httpstemplate:({domain:s,user:t,project:e,committish:i})=>`https://${s}/${t}/${e}.git${p("#",i)}`,tarballtemplate:({domain:s,user:t,project:e,committish:i})=>`https://${s}/${t}/${e}/archive/${w(i)||"HEAD"}.tar.gz`,bugstemplate:({user:s,project:t})=>`https://todo.sr.ht/${s}/${t}`,extract:s=>{let[,t,e,i]=s.pathname.split("/",4);if(!["archive"].includes(i)&&(e&&e.endsWith(".git")&&(e=e.slice(0,-4)),!(!t||!e)))return{user:t,project:e,committish:s.hash.slice(1)}}};for(let[s,t]of Object.entries(U))U[s]=Object.assign({},ue,t);Mt.exports=U});var gt=R((We,Ft)=>{var me=S("url"),mt=(s,t,e)=>{let i=s.indexOf(e);return s.lastIndexOf(t,i>-1?i:Infinity)},_t=s=>{try{return new me.URL(s)}catch{}},ge=(s,t)=>{let e=s.indexOf(":"),i=s.slice(0,e+1);if(Object.prototype.hasOwnProperty.call(t,i))return s;let n=s.indexOf("@");return n>-1?n>e?`git+ssh://${s}`:s:s.indexOf("//")===e+1?s:`${s.slice(0,e+1)}//${s.slice(e+1)}`},ye=s=>{let t=mt(s,"@","#"),e=mt(s,":","#");return e>t&&(s=s.slice(0,e)+"/"+s.slice(e+1)),mt(s,":","#")===-1&&s.indexOf("//")===-1&&(s=`git+ssh://${s}`),s};Ft.exports=(s,t)=>{let e=t?ge(s,t):s;return _t(e)||_t(ye(e))}});var jt=R((He,Dt)=>{"use strict";var $e=gt(),we=s=>{let t=s.indexOf("#"),e=s.indexOf("/"),i=s.indexOf("/",e+1),n=s.indexOf(":"),r=/\s/.exec(s),o=s.indexOf("@"),a=!r||t>-1&&r.index>t,c=o===-1||t>-1&&o>t,l=n===-1||t>-1&&n>t,d=i===-1||t>-1&&i>t,h=e>0,f=t>-1?s[t-1]!=="/":!s.endsWith("/"),u=!s.startsWith(".");return a&&h&&f&&u&&c&&l&&d};Dt.exports=(s,t,{gitHosts:e,protocols:i})=>{var $,P;if(!s)return;let n=we(s)?`github:${s}`:s,r=$e(n,i);if(!r)return;let o=e.byShortcut[r.protocol],a=e.byDomain[r.hostname.startsWith("www.")?r.hostname.slice(4):r.hostname],c=o||a;if(!c)return;let l=e[o||a],d=null;(($=i[r.protocol])==null?void 0:$.auth)&&(r.username||r.password)&&(d=`${r.username}${r.password?":"+r.password:""}`);let h=null,f=null,u=null,y=null;try{if(o){let m=r.pathname.startsWith("/")?r.pathname.slice(1):r.pathname,T=m.indexOf("@");T>-1&&(m=m.slice(T+1));let L=m.lastIndexOf("/");L>-1?(f=decodeURIComponent(m.slice(0,L)),f||(f=null),u=decodeURIComponent(m.slice(L+1))):u=decodeURIComponent(m),u.endsWith(".git")&&(u=u.slice(0,-4)),r.hash&&(h=decodeURIComponent(r.hash.slice(1))),y="shortcut"}else{if(!l.protocols.includes(r.protocol))return;let m=l.extract(r);if(!m)return;f=m.user&&decodeURIComponent(m.user),u=decodeURIComponent(m.project),h=decodeURIComponent(m.committish),y=((P=i[r.protocol])==null?void 0:P.name)||r.protocol.slice(0,-1)}}catch(m){if(m instanceof URIError)return;throw m}return[c,f,d,u,h,y,t]}});var Wt=R((Re,Nt)=>{"use strict";var be=Et(),xe=Ut(),Se=jt(),ve=gt(),yt=new be({max:1e3}),_,G,b,k,O=class{constructor(t,e,i,n,r,o,a={}){Q(this,b);Object.assign(this,E(O,_)[t],{type:t,user:e,auth:i,project:n,committish:r,default:o,opts:a})}static addHost(t,e){E(O,_)[t]=e,E(O,_).byDomain[e.domain]=t,E(O,_).byShortcut[`${t}:`]=t,E(O,G)[`${t}:`]={name:t}}static fromUrl(t,e){if(typeof t!="string")return;let i=t+JSON.stringify(e||{});if(!yt.has(i)){let n=Se(t,e,{gitHosts:E(O,_),protocols:E(O,G)});yt.set(i,n?new O(...n):void 0)}return yt.get(i)}static parseUrl(t){return ve(t)}hash(){return this.committish?`#${this.committish}`:""}ssh(t){return x(this,b,k).call(this,this.sshtemplate,t)}sshurl(t){return x(this,b,k).call(this,this.sshurltemplate,t)}browse(t,...e){return typeof t!="string"?x(this,b,k).call(this,this.browsetemplate,t):typeof e[0]!="string"?x(this,b,k).call(this,this.browsetreetemplate,I(A({},e[0]),{path:t})):x(this,b,k).call(this,this.browsetreetemplate,I(A({},e[1]),{fragment:e[0],path:t}))}browseFile(t,...e){return typeof e[0]!="string"?x(this,b,k).call(this,this.browseblobtemplate,I(A({},e[0]),{path:t})):x(this,b,k).call(this,this.browseblobtemplate,I(A({},e[1]),{fragment:e[0],path:t}))}docs(t){return x(this,b,k).call(this,this.docstemplate,t)}bugs(t){return x(this,b,k).call(this,this.bugstemplate,t)}https(t){return x(this,b,k).call(this,this.httpstemplate,t)}git(t){return x(this,b,k).call(this,this.gittemplate,t)}shortcut(t){return x(this,b,k).call(this,this.shortcuttemplate,t)}path(t){return x(this,b,k).call(this,this.pathtemplate,t)}tarball(t){return x(this,b,k).call(this,this.tarballtemplate,I(A({},t),{noCommittish:!1}))}file(t,e){return x(this,b,k).call(this,this.filetemplate,I(A({},e),{path:t}))}edit(t,e){return x(this,b,k).call(this,this.edittemplate,I(A({},e),{path:t}))}getDefaultRepresentation(){return this.default}toString(t){return this.default&&typeof this[this.default]=="function"?this[this.default](t):this.sshurl(t)}},Y=O;_=new WeakMap,G=new WeakMap,b=new WeakSet,k=function(t,e){if(typeof t!="function")return null;let i=A(A(A({},this),this.opts),e);i.path||(i.path=""),i.path.startsWith("/")&&(i.path=i.path.slice(1)),i.noCommittish&&(i.committish=null);let n=t(i);return i.noGitPlus&&n.startsWith("git+")?n.slice(4):n},Q(Y,_,{byShortcut:{},byDomain:{}}),Q(Y,G,{"git+ssh:":{name:"sshurl"},"ssh:":{name:"sshurl"},"git+https:":{name:"https",auth:!0},"git:":{auth:!0},"http:":{auth:!0},"https:":{auth:!0},"git+http:":{auth:!0}});for(let[s,t]of Object.entries(xe))Y.addHost(s,t);Nt.exports=Y});var Me={};ht(Me,{default:()=>Ce});var Qt=v(S("@yarnpkg/cli")),N=v(S("@yarnpkg/core")),D=v(S("clipanion"));var g=v(S("@yarnpkg/core")),z=v(S("@yarnpkg/fslib")),Gt=v(Wt());var wt={};ht(wt,{fs:()=>Le,getPackagePath:()=>ke});var Ht=v(S("@yarnpkg/plugin-pnp")),it=v(S("@yarnpkg/core")),nt=v(S("@yarnpkg/fslib")),Rt=v(S("@yarnpkg/libzip"));var st=()=>({os:[process.platform],cpu:[process.arch]});var ke=async(s,t)=>{if(Pe(s),!it.structUtils.isPackageCompatible(t,st()))return null;let e=it.structUtils.convertPackageToLocator(t),i={name:it.structUtils.stringifyIdent(e),reference:e.reference},n=$t.getPackageInformation(i);if(!n)return null;let{packageLocation:r}=n;return r},$t,Pe=s=>{$t||($t=module.require((0,Ht.getPnpPath)(s).cjs))},Le=new nt.VirtualFS({baseFs:new nt.ZipOpenFS({libzip:(0,Rt.getLibzipSync)(),readOnlyArchives:!0})});var bt={};ht(bt,{_getYarnStateAliases:()=>Yt,fs:()=>ze,getPackagePath:()=>Ae});var j=v(S("@yarnpkg/core")),Bt=v(S("@yarnpkg/parsers")),F=v(S("@yarnpkg/fslib"));var Ae=async(s,t)=>{if(await Te(s),!j.structUtils.isPackageCompatible(t,st()))return null;let e=j.structUtils.convertPackageToLocator(t),i=j.structUtils.stringifyLocator(e),n=rt[i]||qt[i];if(!n)return null;let r=n.locations[0];return r?F.ppath.join(s.cwd,r):s.cwd},rt,qt,Te=async s=>{if(!rt){let t=F.ppath.join(s.configuration.projectCwd,F.Filename.nodeModules,".yarn-state.yml");rt=(0,Bt.parseSyml)(await F.xfs.readFilePromise(t,"utf8")),qt=Yt(rt)}},ze=F.xfs,Yt=s=>Object.entries(s).reduce((t,[e,i])=>{if(!i.aliases)return t;let n=j.structUtils.parseLocator(e);for(let r of i.aliases){let o=j.structUtils.makeLocator(n,r),a=j.structUtils.stringifyLocator(o);t[a]=i}return t},{});var xt=s=>{switch(s){case"pnp":return wt;case"node-modules":return bt;default:throw new Error("Unsupported linker")}};var os=z.npath.basename(__dirname)==="@yarnpkg"?z.ppath.join(z.npath.toPortablePath(__dirname),"../.."):z.ppath.join(z.npath.toPortablePath(__dirname),".."),Vt=async(s,t,e,i,n)=>{let r={},o={children:r},a=await Jt(s,e,i),c=xt(s.configuration.get("nodeLinker"));for(let[l,d]of a.entries()){let h=await c.getPackagePath(s,d);if(h===null)continue;let f=JSON.parse(await c.fs.readFilePromise(z.ppath.join(h,z.Filename.manifest),"utf8")),{license:u,url:y,vendorName:$,vendorUrl:P}=Ie(f);r[u]||(r[u]={value:g.formatUtils.tuple(g.formatUtils.Type.NO_HINT,u),children:{}});let m=g.structUtils.convertPackageToLocator(d),T=g.formatUtils.tuple(g.formatUtils.Type.DEPENDENT,{locator:m,descriptor:l}),L=n?{}:A(A(A({},y?{url:{value:g.formatUtils.tuple(g.formatUtils.Type.NO_HINT,St("URL",y,t))}}:{}),$?{vendorName:{value:g.formatUtils.tuple(g.formatUtils.Type.NO_HINT,St("VendorName",$,t))}}:{}),P?{vendorUrl:{value:g.formatUtils.tuple(g.formatUtils.Type.NO_HINT,St("VendorUrl",P,t))}}:{}),K={value:T,children:L},X=g.structUtils.stringifyLocator(m),Z=r[u].children;Z[X]=K}return o},Jt=async(s,t,e)=>{let i=new Map,n;if(t){if(e){for(let c of s.workspaces)c.manifest.devDependencies.clear();let a=await g.Cache.find(s.configuration);await s.resolveEverything({report:new g.ThrowReport,cache:a})}n=s.storedDescriptors.values()}else n=s.workspaces.flatMap(a=>{let c=[a.anchoredDescriptor];for(let[l,d]of a.dependencies.entries())e&&a.manifest.devDependencies.has(l)||c.push(d);return c});let r=g.miscUtils.sortMap(n,[a=>g.structUtils.stringifyIdent(a),a=>g.structUtils.isVirtualDescriptor(a)?"0":"1",a=>a.range]),o=new Set;for(let a of r.values()){let c=s.storedResolutions.get(a.descriptorHash);if(!c)continue;let l=s.storedPackages.get(c);if(!l)continue;let{descriptorHash:d}=g.structUtils.isVirtualDescriptor(a)?g.structUtils.devirtualizeDescriptor(a):a;o.has(d)||(o.add(d),i.set(a,l))}return i};function Oe(s){let t={},e=s.match(/^([^(<]+)/);if(e){let r=e[0].trim();r&&(t.name=r)}let i=s.match(/<([^>]+)>/);i&&(t.email=i[1]);let n=s.match(/\(([^)]+)\)/);return n&&(t.url=n[1]),t}var Ie=s=>{let{license:t,licenses:e,repository:i,homepage:n,author:r}=s,o=typeof r=="string"?Oe(r):r;return{license:(()=>{if(t)return ot(t);if(e){if(!Array.isArray(e))return ot(e);if(e.length===1)return ot(e[0]);if(e.length>1)return`(${e.map(ot).join(" OR ")})`}return Kt})(),url:Xt(i)||n,vendorName:o==null?void 0:o.name,vendorUrl:n||(o==null?void 0:o.url)}},Kt="UNKNOWN",ot=s=>(typeof s!="string"?s.type:s)||Kt,Xt=s=>{let t=typeof s=="string"?s:s==null?void 0:s.url;if(!t)return t;let e=Gt.fromUrl(t);return!e||e.getDefaultRepresentation()!=="shortcut"?t:e.https()},St=(s,t,e)=>e?t:`${s}: ${t}`,Zt=async(s,t,e)=>{let i=await Jt(s,t,e),n=xt(s.configuration.get("nodeLinker")),r=new Map;for(let a of i.values()){let c=await n.getPackagePath(s,a);if(c===null)continue;let l=JSON.parse(await n.fs.readFilePromise(z.ppath.join(c,z.Filename.manifest),"utf8")),h=(await n.fs.readdirPromise(c,{withFileTypes:!0})).filter(T=>T.isFile()).map(({name:T})=>T),f=h.find(T=>{let L=T.toLowerCase();return L==="license"||L.startsWith("license.")||L==="unlicense"||L.startsWith("unlicense.")});if(!f)continue;let u=await n.fs.readFilePromise(z.ppath.join(c,f),"utf8"),y=h.find(T=>{let L=T.toLowerCase();return L==="notice"||L.startsWith("notice.")}),$;y&&($=await n.fs.readFilePromise(z.ppath.join(c,y),"utf8"));let P=$?`${u}

NOTICE

${$}`:u,m=r.get(P);m?m.set(l.name,l):r.set(P,new Map([[l.name,l]]))}let o=`THE FOLLOWING SETS FORTH ATTRIBUTION NOTICES FOR THIRD PARTY SOFTWARE THAT MAY BE CONTAINED IN PORTIONS OF THE ${String(s.topLevelWorkspace.manifest.raw.name).toUpperCase().replace(/-/g," ")} PRODUCT.

`;for(let[a,c]of r.entries()){o+=`-----

`;let l=[],d=[];for(let{name:f,repository:u}of c.values()){l.push(f);let y=Xt(u);y&&d.push(c.size===1?y:`${y} (${f})`)}let h=[];h.push(`The following software may be included in this product: ${l.join(", ")}.`),d.length>0&&h.push(`A copy of the source code may be downloaded from ${d.join(", ")}.`),h.push("This software contains the following license and notice below:"),o+=`${h.join(" ")}

`,o+=`${a.trim()}

`}return o};var V=class extends D.Command{constructor(){super(...arguments);this.recursive=D.Option.Boolean("-R,--recursive",!1,{description:"Include transitive dependencies (dependencies of direct dependencies)"});this.production=D.Option.Boolean("--production",!1,{description:"Exclude development dependencies"});this.json=D.Option.Boolean("--json",!1,{description:"Format output as JSON"});this.excludeMetadata=D.Option.Boolean("--exclude-metadata",!1,{description:"Exclude dependency metadata from output"})}async execute(){let t=await N.Configuration.find(this.context.cwd,this.context.plugins),{project:e,workspace:i}=await N.Project.find(t,this.context.cwd);if(!i)throw new Qt.WorkspaceRequiredError(e.cwd,this.context.cwd);await e.restoreInstallState();let n=await Vt(e,this.json,this.recursive,this.production,this.excludeMetadata);N.treeUtils.emitTree(n,{configuration:t,stdout:this.context.stdout,json:this.json,separators:1})}};V.paths=[["licenses","list"]],V.usage=D.Command.Usage({description:"display the licenses for all packages in the project",details:`
      This command prints the license information for packages in the project. By default, only direct dependencies are listed.

      If \`-R,--recursive\` is set, the listing will include transitive dependencies (dependencies of direct dependencies).

      If \`--production\` is set, the listing will exclude development dependencies.
    `,examples:[["List all licenses of direct dependencies","$0 licenses list"],["List all licenses of direct and transitive dependencies","$0 licenses list --recursive"],["List all licenses of production dependencies only","$0 licenses list --production"]]});var te=v(S("@yarnpkg/cli")),at=v(S("@yarnpkg/core")),W=v(S("clipanion"));var J=class extends W.Command{constructor(){super(...arguments);this.recursive=W.Option.Boolean("-R,--recursive",!1,{description:"Include transitive dependencies (dependencies of direct dependencies)"});this.production=W.Option.Boolean("--production",!1,{description:"Exclude development dependencies"})}async execute(){let t=await at.Configuration.find(this.context.cwd,this.context.plugins),{project:e,workspace:i}=await at.Project.find(t,this.context.cwd);if(!i)throw new te.WorkspaceRequiredError(e.cwd,this.context.cwd);await e.restoreInstallState();let n=await Zt(e,this.recursive,this.production);this.context.stdout.write(n)}};J.paths=[["licenses","generate-disclaimer"]],J.usage=W.Command.Usage({description:"display the license disclaimer including all packages in the project",details:`
      This command prints the license disclaimer for packages in the project. By default, only direct dependencies are listed.

      If \`-R,--recursive\` is set, the disclaimer will include transitive dependencies (dependencies of direct dependencies).

      If \`--production\` is set, the disclaimer will exclude development dependencies.
    `,examples:[["Include licenses of direct dependencies","$0 licenses generate-disclaimer"],["Include licenses of direct and transitive dependencies","$0 licenses generate-disclaimer --recursive"],["Include licenses of production dependencies only","$0 licenses list --production"]]});var Ee={commands:[V,J]},Ce=Ee;return Me;})();
return plugin;
}
};
